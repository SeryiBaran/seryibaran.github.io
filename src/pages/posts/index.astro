---
import PostPage from '@/layouts/PostPage.astro'
import { getCollection } from 'astro:content'
import FormattedDate from '@/components/FormattedDate.astro'

const posts = (await getCollection('blog')).sort(
  (a, b) => a.data.date.valueOf() - b.data.date.valueOf(),
)
---

<PostPage
  data={{
    title: 'Посты',
    description: 'Мои посты',
  }}
  isShowDate={false}
>
  <ul class="p-0 max-sm:flex max-sm:flex-col max-sm:gap-y-3">
    {
      posts
        .slice()
        .filter((post) => !post.data.draft)
        .reverse()
        .map((post) => (
          <li class="gap-x-2 flex flex-col sm:flex-row sm:items-center">
            <span class="opacity-70 text-sm flex flex-row items-center">
              <FormattedDate date={post.data.date} />
            </span>
            <a href={`/posts/${post.slug}/`}>{post.data.title}</a>
          </li>
        ))
    }
  </ul>
  <!-- <div class="my-4 p-0 grid grid-cols-1 md:grid-cols-1 gap-4">
    {
      posts
        .slice()
        .filter((post) => !post.data.draft)
        .reverse()
        .map((post) => <PostCard post={post} />)
    }
  </div> -->
</PostPage>
