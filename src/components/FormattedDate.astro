---
import { formatPostDate } from '@/utils'
import TablerCalendar from '~icons/tabler/calendar'
import TablerPencil from '~icons/tabler/pencil'

export interface Props {
  date: Date
  isUpdatedDate?: boolean
  isShowTime?: boolean
  isShowIcon?: boolean
  isColored?: boolean
}

const {
  date,
  isUpdatedDate = false,
  isShowTime = false,
  isShowIcon = true,
  isColored = false,
} = Astro.props

const showTime = date.getHours() !== 0 && date.getMinutes() !== 0 && isShowTime
---

<time
  datetime={date.toISOString()}
  class="inline-flex items-center gap-1"
  class:list={[{ isColored }]}
  title={formatPostDate(date, true)}
  aria-label={isUpdatedDate ? 'Дата обновления' : 'Дата публикации'}
>
  {
    isUpdatedDate
      ? isShowIcon && <TablerPencil class="w-1em h-1em" />
      : isShowIcon && <TablerCalendar class="w-1em h-1em" />
  }
  {formatPostDate(date, showTime)}
</time>

<style>
  time.isColored {
    @apply text-primary-800 dark:text-primary-200;
  }
</style>
