---
title: 'Что такое GPG'
description: 'Что такое GPG и зачем он нужен для чайников'
date: 2024-02-11T18:59:44.884+03
updatedDate: 2024-07-13T18:33:31.814+03
---

import Alert from '@/components/Alert.astro'

<Alert>Эта статья ориентирована на начинающих - здесь не будет затрагиваться принцип работы GPG, алгоритмы, которые в нем используются и прочее.</Alert>

## Теория

Ситуация. Олег хочет отправить информацию Николаю, но между ними расстояние несколько тысяч километров и есть только незащищенный способ связи - публичный чат с большим количеством людей.

Можно подумать, что нужно использовать обычное симметричное шифрование (а-ля сейф с ключом) - но нет. Оно подразумевает передачу секретного (приватного) ключа получателю - что не подходит для нашего случая.

Для таких случаев изобрели асимметричное шифрование. В нем есть уже 2 ключа - приватный и публичный. Название второго говорит само за себя - его можно раздавать каждому встречному[^1]. Почему? Публичный ключ - может **только зашифровать** информацию, но не расшифровать её. Приватный же, может и зашифровывать, и **расшифровывать информацию**.

На практике это можно представить так[^2]:
У участника A есть личный замок и ключ от него. Если участник А хочет получить секретную посылку от участника Б, то он публично передаёт ему свой замок. Участник Б защёлкивает замок на секретной посылке и отправляет её участнику А. Получив посылку, участник А открывает ключом замок и получает посылку.

GPG - свободная бесплатная программа для шифрования и подписывания файлов и текстовых сообщений, реализация [OpenPGP](https://ru.wikipedia.org/wiki/PGP#OpenPGP), который в свою очередь "реализация" ассиметричного шифрования.

Итак, вернёмся к нашим ~~баранам~~ челам.

Алгоритм обмена зашифровки и обмена информацией с GPG:

1. Олег просит Николая создать ключи
2. Николай генерирует приватный и публичный ключи
3. Николай отправляет публичный ключ Олегу
4. Олег зашифровывает информацию публичным ключом Николая
5. Олег отправляет зашифрованную информацию Николаю через публичный чат
6. Николай расшифровывает информацию приватным ключом

Но тут появился глупый злоумышленник, не знающий как работает GPG, и попытался расшифровать сообщение публичным ключом. Но у него ничего не получится - публичный ключ может **только зашифровывать**, но **не расшифровывать**.

## Краткая практика

Для практики будем использовать Windows 10+ и GPG4Win.

<Alert>Не волнуйтесь - во всех программах для работы с OpenPGP всё выглядит и работает примерно одинаково</Alert>

GPG4Win - это "пакет" софта, включающий в себя сам GPG, а также плагин для Outlook и удобный графический интерфейс Kleopatra.

Допустим, ваш друг хочет отправить вам какую-либо информацию.

Скачиваем GPG4Win с [официального сайта](https://www.gpg4win.org/) и устанавливаем (с этим не должно быть никаких проблем) на свой компьютер и компьютер друга.

Для начала, вам нужно создать пару ключей OpenPGP (приватный + публичный):

1. Запускаем "Файл => Новая пара OpenPGP ключей"
2. Вводим имя и по желанию E-Mail:
   ![Создание ключей 1](/uploads/what_is_gpg/gen_keys_1.png)

3. Нажимаем "Дополнительные параметры"
4. Если хотим, можем указать здесь дату прихода в негодность ключа (1), его функционал (2) и тип (3). Кратко про типы ключей - `RSA` самый популярный и везде поддерживается, а `ECDSA/EdDSA` самый надежный:
   ![Создание ключей 2](/uploads/what_is_gpg/gen_keys_2.png)

5. Теперь нажимаем `OK`:
   ![Создание ключей 3](/uploads/what_is_gpg/gen_keys_3.png)

Готово:

![Создание ключей 4](/uploads/what_is_gpg/gen_keys_4.png)

Далее, нужно экспортировать публичный ключ в файл:

![Экспорт публичного ключа](/uploads/what_is_gpg/export_public_key.png)

Затем, передайте вашему другу этот файл любым способом. Можно отсылать даже в публичных каналах, ведь как мы помним из примера выше, публичным ключом можно только зашифровывать.

Переходим к компьютеру вашего друга.

Ваш друг должен импортировать переданный ранее файл публичного ключа:

![Импорт публичного ключа 1](/uploads/what_is_gpg/import_public_key.png)

Теперь ваш друг может зашифровать файл или текст. Файл проще всего зашифровать, нажав ПКМ по файлу в Проводнике:

![Шифрование файла через ПКМ 1](/uploads/what_is_gpg/explorer_encrypting_1.png)

В появившемся окне можно выбрать каким ключом шифровать, шифровать ли для себя, добавить ли ещё получателей и т.д.:

![Шифрование файла через ПКМ 2](/uploads/what_is_gpg/explorer_encrypting_2.png)

В папке с файлом появляется его зашифрованная копия:

![Шифрование файла через ПКМ 3](/uploads/what_is_gpg/explorer_encrypting_3.png)

С примерно следующим содержимым:

```plaintext
-----BEGIN PGP MESSAGE-----

hF4DzgN7xgit3/4SAQdACj8ebo85FR9Sv4vnwNxD4p2AkFgKHqQl5/MlDDUnxRkw
RRz/82b2xb7QozIZBR+kX0upF03U7drwswZoVDZr+EWr1pXHDsT5r+0osb2e5WwL
1MBBAQkCEBnJEBwq65YTxv04sMZIg81jntbEvbuq+op0PlH2wBxQShvaa/MKPq5a
Q+AC1uqpXZvwACwjorU8SFtCVc+gL/WLijJeduQWSr4EXq539sBjAAH0talZZWT4
PNLpzcLgIyG4JAZX1X8eQ9ypHgA9f5ioLQOmhSpbVpvBxx2lMYvhSMT8SEy/oDGj
fwPLz1vrWiEOZH4iNO4tRfdVwWSlQipqKh4Q7wn4Qu9b15hX3twulT7/DHXB54hW
lTJe7se/lIQD1CF428zBhPap2NnHenFIEXNjU2HynDY/oCWk8Xjre/9mKOgpAvZN
hRjUZ5gjTS9PFC2lRzE6eAOxTF4=
=1dcC
-----END PGP MESSAGE-----
```

Затем ваш друг отправляет этот зашифрованный файлик вам. Теперь вам нужно его расшифровать. Проще всего это можно сделать просто открыв файл через проводник, либо нажав ПКМ и выбрав "Проверить/Расшифровать" и затем нажав "Сохранить всё":

![Расшифровка файла через проводник](/uploads/what_is_gpg/explorer_decrypting.png)

Также в Kleopatra существует "Блокнот" - раздел позволяющий зашифровывать и расшифровывать текстовые сообщения без файлов.

Здесь есть вкладка "Получатели:

![Kleopatra - блокнот - получатели](/uploads/what_is_gpg/kleopatra_notepad_1.png)

И вкладка с текстовым полем:

![Kleopatra - блокнот - текстовое поле](/uploads/what_is_gpg/kleopatra_notepad_2.png)

Если ввести в это поле сообщение и нажать "Зашифровать", сообщение заменится своей зашифрованной версией:

![Kleopatra - блокнот - текстовое поле - зашифровка](/uploads/what_is_gpg/kleopatra_notepad_3.png)

Если же в это поле вставить такое зашифрованное сообщение и нажать "Расшифровать", сообщение (как неожиданно xD) расшифруется:

![Kleopatra - блокнот - текстовое поле - расшифровка](/uploads/what_is_gpg/kleopatra_notepad_4.png)

Вот в принципе и все. Главное не забывайте:

1. **НЕ ДАВАЙТЕ НИКОМУ ПРИВАТНЫЙ КЛЮЧ**!
2. Можете **раскидываться публичными** ключами как хотите
3. Можете посылать **ЗАШИФРОВАННОЕ** сообщение по любым **незащищенным** каналам связи

Если что-то не понятно или хотите побольше узнать про все вот это вот ваше это все, можете посмотреть здесь:

## Дополнительные источники

1. ([SingleFile](/uploads/what_is_gpg/additional_site_1_(13.07.2024_18_02_45).html)) [Proglib - "🕵 GPG и все-все-все: настраиваем шифрование переписки за 10 минут по методу Кристофера Робина"](https://proglib.io/p/gpg-i-vse-vse-vse-nastraivaem-shifrovanie-perepiski-za-10-minut-po-metodu-kristofera-robina-2021-05-26)
2. ([SingleFile](/uploads/what_is_gpg/additional_site_2_(13.07.2024_18_04_30).html)) [Habr - "Kleopatra: GnuPG в графической оболочке"](https://habr.com/ru/articles/551138/)
3. ([SingleFile](/uploads/what_is_gpg/additional_site_3_(13.07.2024_18_06_30).html)) [Habr - "Используем GPG для шифрования сообщений и файлов"](https://habr.com/ru/articles/358182/)
4. ([SingleFile](/uploads/what_is_gpg/additional_site_4_(13.07.2024_18_07_30).html)) [Как пользоваться gpg: шифрование, расшифровка файлов и сообщений, подпись файлов и проверка подписи, управление ключами](https://hackware.ru/?p=8215)

## Сноски

[^1]: Что некоторые и делают, публикуя свой публичный ключ на публичных серверах
[^2]: [источник](https://ru.wikipedia.org/wiki/Криптосистема_с_открытым_ключом)
